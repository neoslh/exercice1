function aff(){location.hash="#/afficher"}var tableau;$(function(){function a(a){if(!$(a).is(":visible"))return!0;switch($(a).attr("data-type")){case"nombre":return/^[0-9]{1,}$/.test($(a).val());case"nom":return/^[a-zA-Z]{1,}$/.test($(a).val());case"text":return/^[a-zA-Z0-9.,]{1,}$/.test($(a).val())}return!1}Handlebars.registerHelper("tojson",function(a){return a.toJSON()}),tableau=new MaterielCollection,data.forEach(function(a){tableau.push(new Materiel(a))});new Router;Backbone.history.start(),$(document).on("change","#Etat",function(){"Affecté"==$(this).val()?$(".hide_input").show():($(".verification").popover("destroy"),$(".hide_input").hide())}).on("change",".verification",function(){a(this)?($(this).css("border-color","#E67E22"),$(this).popover("destroy")):($(this).css("border-color","#C0392B"),$(".verification").popover("destroy"),$(this).popover({placement:"right",template:'<div class="popover popover_verification" role="tooltip"><div class="arrow arrow_verification"></div><div class="popover-content"></div></div>',html:!0,container:"body",content:function(){return"<span> vérifier le contenu du champ </span>"}}),$(this).popover("show"))}).on("click","#ajouter",function(){var b=!0;$("#form .verification").each(function(c){b=0==b?!1:a(this)}),b&&(tableau.push(new Materiel({ID:$("#ID").val(),Model:$("#Model").val(),Marque:$("#Marque").val(),Type:$("#Type").val(),Etat:$("#Etat").val(),Personne:$("#Personne").val(),Service:$("#Service").val(),Desc:$("#Desc").val()})),$("#ID").val(""),$("#Model").val(""),$("#Marque").val(""),$("#Personne").val(""),$("#Service").val(""),$("#Desc").val(""),aff())}).on("click",".marketing thead th a",function(){for(var a=$(this).parents().closest("tr").children().index($(this).parent()),b=$(this).parents().closest("table").find("tbody").children().length-1;b>0;b--){for(var c=b,d=$($($(this).parents().closest("table").find("tbody").children()[b]).children()[a]).html().toUpperCase(),e=b-1;e>=0;e--)d<$($($(this).parents().closest("table").find("tbody").children()[e]).children()[a]).html().toUpperCase()&&(c=e,d=$($($(this).parents().closest("table").find("tbody").children()[e]).children()[a]).html());var f=$($(this).parents().closest("table").find("tbody").children()[c]).html();$($(this).parents().closest("table").find("tbody").children()[c]).html($($(this).parents().closest("table").find("tbody").children()[b]).html()),$($(this).parents().closest("table").find("tbody").children()[b]).html(f)}}).on("click","#Supprimer",function(){$(this).parents().closest("tr").remove()})});